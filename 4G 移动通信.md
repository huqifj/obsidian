## CS 和 PS

| CS 域                                                              | PS 域                                                                                                                                                                       |
| ---------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 主要负责语音业务，如 12.2K 语音业务，64K 视频电话业务等          | 用于数据业务，通俗点说也就是上网业务，接入互联网                                                                                                                          |
| 即电路交换域，主要有语音业务（AMR 12.2K），视频电话业务（CS64K） | 即数据交换域，负责数据业务，包括 PS384K 业务（UE 发起 384kbps PS 域数据业务，是用手机下载一些数据文件等），还有就是高速数据业务包括上传和下载数据业务，也就是 HS 业务等。 |
| 主要针对实时性要求较高的业务，如语音、视频业务，对延时的要求很高 | 分组数据业务，体现在数据二字上面，主要提供像 PS384HS 等上网服务                                                                                                           |
|  电弧交换，独占信道主要用于语音，直到通话结束才释放信道，供其他用户使用    |       分组交换（包交换），主要用于数据业务（上网之类），采用分组 - 转发机制，多用户共用信道资源，使得资源利用率大大提高。                                                                                                                                                                    |

在 4G 下，接入网同时连接 CS 和 PS，即核心网分割为 CS,PS，打电话信号走 CS，数据业务信号走 PS。

## 移动通信角色

MS（移动台，可以是手机、无线通信模块等设备）要接入外部 PDN（外部分组数据网，包括企业内部网、Internet、WAP 网站、行业内部网等），首先要具有一个 IP 地址，称为 PDP 地址，PDP 地址是用于 PDN 识别 MS 的 PDP 上下文时使用的地址。MS 以后就通过这个 IP 地址和 PDN 进行数据通信，简化的通信图如下：

![](image-20220923164707.png)

- MS：移动台，可以是手机、无线通信模块等设备
- BSS：移动基站
- GGSN：移动网关，和外部数据网络（包括企业内部网、Internet、WAP 网站、行业内部网等）相连，MS 经由 GGSN 就可以和外部数据网络“自由交谈”了。
- PSTN：外部数据网络（包括企业内部网、Internet、WAP 网站、行业内部网等）

## PDP 上下文

PDP 上下文，即移动场景，英文全称 PDP Context，PDP 是分组报文协议的简写，Context 翻译成上下文。

在激活 PDP 之前，模块必须先附着上数据网络，4G 模块开机后，会自动去附着数据网络，只要通过 AT+CGATT？轮询是否附着成功即可，附着上数据网络之后，就可以激活 PDP 了

由上文可知，4G 模块首先要请求网关分配一个 IP 地址（称为 PDP 地址，可以看做是移动网关内部的私有地址），然后才能经由网关和外部数据网络通信。

这个请求网关分配地址的过程称为激活 PDP ，PDP 地址就像开通有线电话时，开通工单上的电话号码，而 PDP 上下文就是这张电话开通工单，上面不仅有分配给你的电话号码，还有这部电话对应的其他属性、其他功能的信息。PDP 上下文是一个结构 , 而 PDP 地址只是结构中的一个成员而已，除此之外，还包括 QoS、APN 等，这些都是 PDP 上下文的内容。

在 PDP 上下文中，有一个重要的参数 APN，APN 是 4G 模块用来告知网关要访问哪种外部数据网络（外部分组数据网，包括企业内部网、Internet、WAP 网站、行业内部网等）；还是以刚才的开通电话为例，开通时要求 “仅支持省内电话呼入呼出”、“仅支持国内电话呼入呼出”、“可全球呼入呼出” 这个就相当于是电话单的 APN。

## 相关 AT 命令

* 查询 APN
```
AT+CGDCONT?
```

* 查询 mmc（移动设备国家代码）、mnc（移动设备网络代码）
```
AT+QNWINFO
```

## 参考

[Air 系列 4G 模块 AT 版本 PDP 使用汇总](https://oldask.openluat.com/article/937)